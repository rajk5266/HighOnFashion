---
import Layout from "../../layouts/BlogLayout.astro";
import blogsJson from "../../data/blogs.json";

interface Blog {
  id: string;
  title: string;
  description: string;
  date: string;
  readTime: string;
  cover: string;
  content: string;
}

/* ðŸ”‘ REQUIRED for dynamic routes */
export async function getStaticPaths() {
  const blogs: Blog[] = blogsJson;

  return blogs.map((blog) => ({
    params: { id: blog.id },
  }));
}

// runtime page logic
const blogs: Blog[] = blogsJson;
const { id } = Astro.params;

const blog = blogs.find((b) => b.id === id);

if (!blog) {
  throw new Error(`Blog not found: ${id}`);
}
---

<Layout
  title={blog.title}
  description={blog.description}
  date={blog.date}
  readTime={blog.readTime}
  cover={blog.cover}
>
  <div set:html={blog.content} />
</Layout>
